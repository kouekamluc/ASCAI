{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}{% trans "Extend Subscription Period" %} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
    &rsaquo; <a href="{% url 'admin:members_member_changelist' %}">{% trans 'Members' %}</a>
    &rsaquo; {% trans 'Extend Subscription Period' %}
</div>
{% endblock %}

{% block content %}
<h1>{% trans "Extend Subscription Period" %}</h1>

<div class="module">
    <h2>{% trans "Selected Members" %}</h2>
    <p>{% trans "Extending subscription for the following members:" %}</p>
    <ul>
        {% for member in members %}
        <li>
            <strong>{{ member.user.get_full_name|default:member.user.email }}</strong>
            {% if member.membership_expiry %}
                - {% trans "Current expiry:" %} {{ member.membership_expiry|date:"Y-m-d" }}
                {% if member.is_subscription_expired %}
                    <span style="color: red;">({% trans "Expired" %})</span>
                {% else %}
                    <span style="color: green;">({% trans "Active" %})</span>
                {% endif %}
            {% else %}
                - <span style="color: orange;">({% trans "No expiry date set" %})</span>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</div>

<form method="post" id="extend-subscription-form">
    {% csrf_token %}
    
    <fieldset class="module aligned">
        <h2>{% trans "Extension Period" %}</h2>
        
        <div class="form-row">
            <div>
                <label for="{{ form.years.id_for_label }}">{{ form.years.label }}:</label>
                {{ form.years }}
                {% if form.years.help_text %}
                    <p class="help">{{ form.years.help_text }}</p>
                {% endif %}
                {% if form.years.errors %}
                    <ul class="errorlist">
                        {% for error in form.years.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="{{ form.months.id_for_label }}">{{ form.months.label }}:</label>
                {{ form.months }}
                {% if form.months.help_text %}
                    <p class="help">{{ form.months.help_text }}</p>
                {% endif %}
                {% if form.months.errors %}
                    <ul class="errorlist">
                        {% for error in form.months.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
        
        <div class="form-row">
            <div>
                <label for="{{ form.days.id_for_label }}">{{ form.days.label }}:</label>
                {{ form.days }}
                {% if form.days.help_text %}
                    <p class="help">{{ form.days.help_text }}</p>
                {% endif %}
                {% if form.days.errors %}
                    <ul class="errorlist">
                        {% for error in form.days.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
        
        {% if form.non_field_errors %}
            <ul class="errorlist">
                {% for error in form.non_field_errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </fieldset>
    
    <div class="submit-row">
        <input type="submit" value="{% trans 'Extend Subscription' %}" class="default" name="_save">
        <a href="{% url 'admin:members_member_changelist' %}" class="button">{% trans 'Cancel' %}</a>
    </div>
</form>

<style>
.module {
    margin-bottom: 20px;
    padding: 15px;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
}

.module h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 1.2em;
}

.module ul {
    margin: 10px 0;
    padding-left: 20px;
}

.module li {
    margin: 5px 0;
    padding: 5px;
}

.form-row {
    margin-bottom: 15px;
}

.form-row label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
}

.form-row input[type="number"] {
    width: 100px;
    padding: 5px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.help {
    font-size: 0.85em;
    color: #666;
    margin-top: 5px;
}

.errorlist {
    color: #ba2121;
    margin: 5px 0;
    padding-left: 20px;
}

.submit-row {
    padding: 15px;
    background: #f8f9fa;
    border-top: 1px solid #dee2e6;
    margin-top: 20px;
}

.submit-row input[type="submit"],
.submit-row .button {
    padding: 10px 15px;
    margin-right: 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
}

.submit-row input[type="submit"].default {
    background: #417690;
    color: white;
}

.submit-row input[type="submit"]:hover {
    background: #205067;
}

.submit-row .button {
    background: #ccc;
    color: #333;
}

.submit-row .button:hover {
    background: #999;
}
</style>
{% endblock %}

