{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Active Sessions" %} - ASCAI{% endblock %}

{% block content %}
<div class="container">
    <h2>{% trans "Active Sessions" %}</h2>
    <p>{% trans "Manage your active sessions across different devices." %}</p>
    
    <table class="table">
        <thead>
            <tr>
                <th>{% trans "Device" %}</th>
                <th>{% trans "Last Activity" %}</th>
                <th>{% trans "Status" %}</th>
                <th>{% trans "Actions" %}</th>
            </tr>
        </thead>
        <tbody>
            {% for session in sessions %}
            <tr>
                <td>
                    {% if session.is_current %}
                        <strong>{% trans "Current Device" %}</strong>
                    {% else %}
                        {% trans "Other Device" %}
                    {% endif %}
                </td>
                <td>{{ session.expire_date|date:"F d, Y H:i" }}</td>
                <td>
                    {% if session.is_current %}
                        <span class="badge badge-success">{% trans "Active" %}</span>
                    {% else %}
                        <span class="badge badge-secondary">{% trans "Active" %}</span>
                    {% endif %}
                </td>
                <td>
                    {% if not session.is_current %}
                    <form method="post" action="{% url 'accounts:session_delete' session.session_key %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-danger">{% trans "Logout" %}</button>
                    </form>
                    {% else %}
                    <span class="text-muted">{% trans "Current session" %}</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">{% trans "No active sessions found." %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {% if sessions|length > 1 %}
    <div class="mt-3">
        <form method="post" action="{% url 'accounts:session_delete_all' %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-warning">{% trans "Logout from All Other Devices" %}</button>
        </form>
    </div>
    {% endif %}
    
    <div class="mt-3">
        <a href="{% url 'accounts:profile' %}" class="btn btn-secondary">{% trans "Back to Profile" %}</a>
    </div>
</div>
{% endblock %}

