{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Welcome to ASCAI" %}{% endblock %}

{% block content %}
<div class="reddit-landing-wrapper">
    <!-- Hero Section -->
    <div class="container">
        <div class="reddit-hero">
            <h1 class="reddit-hero-title">{% trans "Association of Cameroonian Students in Lazio" %}</h1>
            <p class="reddit-hero-subtitle">{% trans "Empowering Cameroonian students in Lazio through community, support, and opportunities" %}</p>
        </div>
    </div>

    <!-- Main Content with Sidebar -->
    <div class="reddit-container">
        <!-- Main Feed -->
        <div class="reddit-main-feed">
            <!-- Features Section -->
            <div class="reddit-section-header">
                <h2 class="reddit-section-title">{% trans "Our Features" %}</h2>
            </div>
            <div class="reddit-feature-grid">
                <div class="reddit-feature-card">
                    <div class="reddit-feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 21l-6-6m2-5a7 7 0 1 1-14 0 7 7 0 0 1 14 0z"></path>
                        </svg>
                    </div>
                    <h3 class="reddit-feature-title">{% trans "University Search" %}</h3>
                    <p class="reddit-feature-description">{% trans "Find universities and study programs in Lazio and Italy" %}</p>
                    <a href="#students" class="reddit-btn reddit-btn-outline">{% trans "Explore" %}</a>
                </div>
                
                <div class="reddit-feature-card">
                    <div class="reddit-feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                        </svg>
                    </div>
                    <h3 class="reddit-feature-title">{% trans "Scholarships & Funding" %}</h3>
                    <p class="reddit-feature-description">{% trans "Information about scholarships, loans, and funding opportunities" %}</p>
                    <a href="#students" class="reddit-btn reddit-btn-outline">{% trans "Learn More" %}</a>
                </div>
                
                <div class="reddit-feature-card">
                    <div class="reddit-feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </div>
                    <h3 class="reddit-feature-title">{% trans "Cultural Exchange" %}</h3>
                    <p class="reddit-feature-description">{% trans "Share experiences and connect with the diaspora community" %}</p>
                    <a href="#diaspora" class="reddit-btn reddit-btn-outline">{% trans "Join" %}</a>
                </div>
                
                <div class="reddit-feature-card">
                    <div class="reddit-feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                            <path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
                        </svg>
                    </div>
                    <h3 class="reddit-feature-title">{% trans "Guidance & Orientation" %}</h3>
                    <p class="reddit-feature-description">{% trans "Get mentorship and guidance from experienced students" %}</p>
                    <a href="#students" class="reddit-btn reddit-btn-outline">{% trans "Get Started" %}</a>
                </div>
            </div>

            <div class="cameroon-flag-accent"></div>

            <!-- Latest News Section -->
            {% if latest_news %}
            <div class="reddit-section-header">
                <h2 class="reddit-section-title">{% trans "Latest News" %}</h2>
                <a href="{% url 'news:list' %}" class="reddit-btn reddit-btn-outline">{% trans "View All" %}</a>
            </div>
            {% for news in latest_news %}
            <div class="reddit-post-card" onclick="window.location.href='{% url 'news:detail' news.slug %}'">
                <div class="reddit-post-vote">
                    <button class="reddit-vote-button" aria-label="{% trans 'Upvote' %}">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 2L3 9h4v8h6v-8h4L10 2z"/>
                        </svg>
                    </button>
                    <span class="reddit-vote-count">‚Ä¢</span>
                    <button class="reddit-vote-button downvote" aria-label="{% trans 'Downvote' %}">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 18l7-7h-4V3H7v8H3l7 7z"/>
                        </svg>
                    </button>
                </div>
                <div class="reddit-post-content">
                    <div class="reddit-post-header">
                        <span class="reddit-post-subreddit">r/ASCAI</span>
                        <span>‚Ä¢</span>
                        <span class="reddit-post-author">{% trans "Posted" %} {{ news.published_at|date:"M d"|default:news.created_at|date:"M d" }}</span>
                        {% if news.category %}
                        <span>‚Ä¢</span>
                        <span>{{ news.category.name }}</span>
                        {% endif %}
                    </div>
                    <a href="{% url 'news:detail' news.slug %}" class="reddit-post-title">{{ news.title }}</a>
                    {% if news.excerpt %}
                    <p class="reddit-post-body">{{ news.excerpt|truncatewords:30 }}</p>
                    {% endif %}
                    {% if news.featured_image %}
                    <img src="{{ news.featured_image.url }}" alt="{{ news.title }}" class="reddit-post-image" onerror="this.style.display='none';">
                    {% endif %}
                    <div class="reddit-post-footer">
                        <div class="reddit-post-action">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM2 8a6 6 0 1 1 12 0A6 6 0 0 1 2 8zm6-3a1 1 0 0 0-1 1v2H5a1 1 0 0 0 0 2h2v2a1 1 0 0 0 2 0V9h2a1 1 0 0 0 0-2H9V6a1 1 0 0 0-1-1z"/>
                            </svg>
                            <span>{% trans "Comment" %}</span>
                        </div>
                        <div class="reddit-post-action">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM1.5 8a6.5 6.5 0 1 1 13 0 6.5 6.5 0 0 1-13 0z"/>
                                <path d="M8 4.5a.5.5 0 0 0-.5.5v2.5H5a.5.5 0 0 0 0 1h2.5V11a.5.5 0 0 0 1 0V8.5H11a.5.5 0 0 0 0-1H8.5V5a.5.5 0 0 0-.5-.5z"/>
                            </svg>
                            <span>{% trans "Share" %}</span>
                        </div>
                        <div class="reddit-post-action">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                            </svg>
                            <span>{% trans "Save" %}</span>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% endif %}

            <div class="cameroon-flag-accent"></div>

            <!-- Upcoming Events Section -->
            {% if upcoming_events %}
            <div class="reddit-section-header">
                <h2 class="reddit-section-title">{% trans "Upcoming Events" %}</h2>
                <a href="{% url 'events:list' %}" class="reddit-btn reddit-btn-outline">{% trans "View All" %}</a>
            </div>
            {% for event in upcoming_events %}
            <div class="reddit-post-card" onclick="window.location.href='{% url 'events:detail' event.slug %}'">
                <div class="reddit-post-vote">
                    <button class="reddit-vote-button" aria-label="{% trans 'Upvote' %}">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 2L3 9h4v8h6v-8h4L10 2z"/>
                        </svg>
                    </button>
                    <span class="reddit-vote-count">‚Ä¢</span>
                    <button class="reddit-vote-button downvote" aria-label="{% trans 'Downvote' %}">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 18l7-7h-4V3H7v8H3l7 7z"/>
                        </svg>
                    </button>
                </div>
                <div class="reddit-post-content">
                    <div class="reddit-post-header">
                        <span class="reddit-post-subreddit">r/ASCAI-Events</span>
                        <span>‚Ä¢</span>
                        <span class="reddit-post-author">{{ event.start_date|date:"M d, Y H:i" }}</span>
                        {% if event.category %}
                        <span>‚Ä¢</span>
                        <span style="color: {{ event.category.color }};">{{ event.category.name }}</span>
                        {% endif %}
                    </div>
                    <a href="{% url 'events:detail' event.slug %}" class="reddit-post-title">{{ event.title }}</a>
                    {% if event.description %}
                    <p class="reddit-post-body">{{ event.description|truncatewords:30 }}</p>
                    {% endif %}
                    {% if event.featured_image %}
                    <img src="{{ event.featured_image.url }}" alt="{{ event.title }}" class="reddit-post-image" onerror="this.style.display='none';">
                    {% endif %}
                    <div class="reddit-post-footer">
                        <div class="reddit-post-action">
                            <span>üìç {{ event.location }}</span>
                        </div>
                        {% if event.is_registration_required %}
                        <div class="reddit-post-action">
                            <span style="color: var(--cameroon-red); font-weight: 600;">{% trans "Registration Required" %}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
            {% endif %}

            <div class="cameroon-flag-accent"></div>

            <!-- Students Section -->
            <section id="students">
                <div class="reddit-section-header">
                    <h2 class="reddit-section-title">{% trans "For Students" %}</h2>
                </div>
                
                <div class="reddit-feature-grid">
                    <div class="reddit-feature-card">
                        <div class="reddit-feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                            </svg>
                        </div>
                        <h3 class="reddit-feature-title">{% trans "Universities in Lazio" %}</h3>
                        <p class="reddit-feature-description">{% trans "Discover universities and study programs in the Lazio region" %}</p>
                        <a href="{% url 'dashboard:students' %}" class="reddit-btn reddit-btn-cameroon">{% trans "Search Universities" %}</a>
                    </div>
                    
                    <div class="reddit-feature-card">
                        <div class="reddit-feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                        </div>
                        <h3 class="reddit-feature-title">{% trans "Scholarships & Funding" %}</h3>
                        <p class="reddit-feature-description">{% trans "Financial support opportunities for your studies" %}</p>
                        <a href="{% url 'events:list' %}" class="reddit-btn reddit-btn-cameroon">{% trans "View Opportunities" %}</a>
                    </div>
                    
                    <div class="reddit-feature-card">
                        <div class="reddit-feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </div>
                        <h3 class="reddit-feature-title">{% trans "Exchange Programs" %}</h3>
                        <p class="reddit-feature-description">{% trans "International exchange opportunities" %}</p>
                        <a href="{% url 'news:list' %}" class="reddit-btn reddit-btn-cameroon">{% trans "Learn More" %}</a>
                    </div>
                </div>

                <!-- University Search -->
                {% if universities %}
                <div class="reddit-search">
                    <h3 style="margin-bottom: 1rem; font-size: 1rem; font-weight: 600;">{% trans "Find Your University" %}</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 0.5rem; margin-bottom: 1rem;">
                        {% for university in universities|slice:":6" %}
                        <div class="reddit-university-card" style="margin-bottom: 0;">
                            <div class="reddit-university-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                                </svg>
                            </div>
                            <div class="reddit-university-info">
                                {% if university.url %}
                                <a href="{{ university.url }}" target="_blank" rel="noopener" class="reddit-university-name">{{ university.name }}</a>
                                {% else %}
                                <span class="reddit-university-name">{{ university.name }}</span>
                                {% endif %}
                                {% if university.location %}
                                <div class="reddit-university-location">{{ university.location }}</div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    <form method="get" action="{% url 'dashboard:students' %}" style="display: flex; gap: 0.5rem;">
                        <input type="text" name="search" placeholder="{% trans 'Search universities...' %}" class="reddit-search-input" style="flex: 1;">
                        <button type="submit" class="reddit-btn reddit-btn-primary">{% trans "Search" %}</button>
                    </form>
                    <a href="{% url 'dashboard:students' %}" class="reddit-btn reddit-btn-outline" style="margin-top: 0.5rem; display: inline-block;">{% trans "View All Universities" %}</a>
                </div>
                {% endif %}
            </section>

            <div class="cameroon-flag-accent"></div>

            <!-- Diaspora Section -->
            <section id="diaspora">
                <div class="reddit-section-header">
                    <h2 class="reddit-section-title">{% trans "Diaspora" %}</h2>
                    <a href="{% url 'dashboard:diaspora' %}" class="reddit-btn reddit-btn-outline">{% trans "View All" %}</a>
                </div>
                
                {% if testimonials %}
                <div class="reddit-feature-grid">
                    {% for testimonial in testimonials %}
                    <div class="reddit-feature-card">
                        <div class="reddit-feature-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                            </svg>
                        </div>
                        <p class="reddit-feature-description" style="font-style: italic; margin-bottom: 0.5rem;">"{{ testimonial.content|truncatewords:30 }}"</p>
                        <div style="font-size: 0.875rem; color: var(--reddit-text-secondary);">
                            <strong>{{ testimonial.display_name }}</strong>
                            {% if testimonial.display_university %}
                            <div>{{ testimonial.display_university }}</div>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </section>
        </div>

        <!-- Sidebar -->
        <aside class="reddit-sidebar">
            <!-- Community Info -->
            <div class="reddit-sidebar-card">
                <div class="reddit-sidebar-header">
                    <span>r/ASCAI</span>
                </div>
                <div class="reddit-sidebar-content">
                    <div class="reddit-community-stats">
                        <div class="reddit-stat">
                            <div class="reddit-stat-value">ASCAI</div>
                            <div class="reddit-stat-label">{% trans "Community" %}</div>
                        </div>
                        <div class="reddit-stat">
                            <div class="reddit-stat-value">{{ upcoming_events|length|default:"0" }}</div>
                            <div class="reddit-stat-label">{% trans "Events" %}</div>
                        </div>
                    </div>
                    <p style="font-size: 0.875rem; color: var(--reddit-text-secondary); margin: 1rem 0;">{% trans "Empowering Cameroonian students in Lazio through community, support, and opportunities" %}</p>
                    <a href="{% url 'members:apply' %}" class="reddit-btn reddit-btn-cameroon" style="width: 100%; justify-content: center; margin-top: 1rem;">{% trans "Join Community" %}</a>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="reddit-sidebar-card">
                <div class="reddit-sidebar-header">
                    <span>{% trans "Quick Links" %}</span>
                </div>
                <div class="reddit-sidebar-content">
                    <a href="{% url 'dashboard:students' %}" class="reddit-sidebar-item">
                        <span class="reddit-sidebar-number">1</span>
                        <span class="reddit-sidebar-text">{% trans "Students" %}</span>
                    </a>
                    <a href="{% url 'dashboard:diaspora' %}" class="reddit-sidebar-item">
                        <span class="reddit-sidebar-number">2</span>
                        <span class="reddit-sidebar-text">{% trans "Diaspora" %}</span>
                    </a>
                    <a href="{% url 'forums:category_list' %}" class="reddit-sidebar-item">
                        <span class="reddit-sidebar-number">3</span>
                        <span class="reddit-sidebar-text">{% trans "Community Forum" %}</span>
                    </a>
                    <a href="{% url 'dashboard:resources' %}" class="reddit-sidebar-item">
                        <span class="reddit-sidebar-number">4</span>
                        <span class="reddit-sidebar-text">{% trans "Resources" %}</span>
                    </a>
                    <a href="{% url 'dashboard:contact' %}" class="reddit-sidebar-item">
                        <span class="reddit-sidebar-number">5</span>
                        <span class="reddit-sidebar-text">{% trans "Contact" %}</span>
                    </a>
                </div>
            </div>

            <!-- Upcoming Events Sidebar -->
            {% if upcoming_events %}
            <div class="reddit-sidebar-card">
                <div class="reddit-sidebar-header">
                    <span>{% trans "Upcoming Events" %}</span>
                </div>
                <div class="reddit-sidebar-content">
                    {% for event in upcoming_events|slice:":5" %}
                    <a href="{% url 'events:detail' event.slug %}" class="reddit-sidebar-item">
                        <div style="flex: 1;">
                            <div style="font-size: 0.875rem; font-weight: 600; color: var(--reddit-text); margin-bottom: 0.25rem;">{{ event.title|truncatewords:8 }}</div>
                            <div style="font-size: 0.75rem; color: var(--reddit-text-secondary);">{{ event.start_date|date:"M d, Y" }}</div>
                        </div>
                    </a>
                    {% endfor %}
                    <a href="{% url 'events:list' %}" class="reddit-btn reddit-btn-outline" style="width: 100%; justify-content: center; margin-top: 0.5rem;">{% trans "View All" %}</a>
                </div>
            </div>
            {% endif %}

            <!-- Scholarships & Calls -->
            {% if open_calls %}
            <div class="reddit-sidebar-card">
                <div class="reddit-sidebar-header">
                    <span>{% trans "Open Calls" %}</span>
                </div>
                <div class="reddit-sidebar-content">
                    {% for event in open_calls|slice:":3" %}
                    <a href="{% url 'events:detail' event.slug %}" class="reddit-sidebar-item">
                        <div style="flex: 1;">
                            <div style="font-size: 0.875rem; font-weight: 600; color: var(--reddit-text); margin-bottom: 0.25rem;">{{ event.title|truncatewords:6 }}</div>
                            <div style="font-size: 0.75rem; color: var(--cameroon-red); font-weight: 600;">{% trans "OPEN" %}</div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </aside>
    </div>
</div>
{% endblock %}
