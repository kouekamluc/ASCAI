{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Pay Membership Fee" %} - ASCAI{% endblock %}

{% block content %}
<div class="payment-page">
    <div class="payment-header">
        <h1>{% trans "Membership Payment" %}</h1>
        <p class="subtitle">{% trans "Complete your membership by paying the annual fee" %}</p>
    </div>
    
    <div class="payment-info-card">
        <div class="payment-summary">
            <h2>{% trans "Payment Summary" %}</h2>
            <div class="summary-item">
                <span>{% trans "Membership Fee" %}:</span>
                <strong>€{{ membership_fee }}</strong>
            </div>
            <div class="summary-total">
                <span>{% trans "Total" %}:</span>
                <strong>€{{ membership_fee }}</strong>
            </div>
        </div>
    </div>
    
    <div class="payment-form-card">
        <h2>{% trans "Select Payment Method" %}</h2>
        
        {% if pending_payment %}
        <div class="alert alert-info">
            <strong>{% trans "Pending Payment Found" %}:</strong>
            {% trans "You have a pending payment. You can update it or continue with a new payment." %}
            <a href="{% url 'members:payment_status' pending_payment.id %}" class="btn btn-sm">{% trans "View Payment" %}</a>
        </div>
        {% endif %}
        
        <form method="post">
            {% csrf_token %}
            
            {% if form.errors %}
            <div class="alert alert-error">
                <h3>{% trans "Please correct the errors below" %}:</h3>
                {{ form.errors }}
            </div>
            {% endif %}
            
            <div class="form-group">
                <label>{% trans "Payment Method" %}</label>
                <div class="payment-methods">
                    {% for choice in form.payment_method %}
                    <div class="payment-method-option">
                        {{ choice.tag }}
                        <label for="{{ choice.id_for_label }}" class="payment-method-label">
                            <span class="method-name">{{ choice.choice_label }}</span>
                            {% if choice.choice_value == "manual" %}
                                <span class="method-info">{% trans "Bank transfer - verification required" %}</span>
                            {% elif choice.choice_value == "stripe" %}
                                <span class="method-info">{% trans "Credit/Debit card - instant activation" %}</span>
                            {% elif choice.choice_value == "paypal" %}
                                <span class="method-info">{% trans "PayPal account - instant activation" %}</span>
                            {% endif %}
                        </label>
                    </div>
                    {% endfor %}
                </div>
                {% if form.payment_method.errors %}
                    <div class="form-error">{{ form.payment_method.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.amount.id_for_label }}">{{ form.amount.label }}</label>
                <div class="amount-input-group">
                    <span class="currency">€</span>
                    {{ form.amount }}
                </div>
                {% if form.amount.errors %}
                    <div class="form-error">{{ form.amount.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.notes.id_for_label }}">{{ form.notes.label }}</label>
                {{ form.notes }}
                {% if form.notes.help_text %}
                    <small class="form-help">{{ form.notes.help_text }}</small>
                {% endif %}
                {% if form.notes.errors %}
                    <div class="form-error">{{ form.notes.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-large">{% trans "Continue to Payment" %}</button>
                <a href="{% url 'dashboard:home' %}" class="btn btn-secondary">{% trans "Cancel" %}</a>
            </div>
        </form>
    </div>
    
    <div class="payment-instructions">
        <h3>{% trans "Payment Instructions" %}</h3>
        <ul>
            <li>{% trans "Membership fee is €10.00 per year" %}</li>
            <li>{% trans "For bank transfer, you'll receive payment details after confirmation" %}</li>
            <li>{% trans "Your membership will be activated once payment is verified" %}</li>
            <li>{% trans "Payment confirmation may take 1-3 business days" %}</li>
        </ul>
    </div>
</div>
{% endblock %}

